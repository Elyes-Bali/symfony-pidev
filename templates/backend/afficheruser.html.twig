{% extends 'base.back.html.twig' %}

{% block title %}Best Trip - Dashboard{% endblock %}


{% block content %}
    <div class="card">
    <br>
    <input type="text" class="form-control" id="searchInput" placeholder="Search&hellip;">
    <br><br>
        <h5 class="card-header">Users</h5>
        <div class="table-responsive text-nowrap">
            <table class="table">
                <thead>
                <tr>

                    <th>Prenom</th>
                      <th>Nom</th>
                    <th>email</th>
                    <th>Password</th>
                    <th>Age</th>
                    <th>téléphone</th>
                    <th>action</th>
                </tr>
                </thead>
                <tbody class="table-border-bottom-0">
                <tr {% for a in User %}>
                    <td> {{ a.lastName }}</td>
                    <td> {{ a.nom }}</td>
                    <td> {{ a.email }}</td>
                    <td> {{ a.password }}</td>
                    <td> {{ a.age}}</td>
                    <td> {{ a.tel}}</td>
                    <td> <a href="{{ path('deleteC',{'id':a.id}) }}"> Delete</a> <a href="{{ path('upc',{'id':a.id}) }}"> update</a> </td>
                </tr {% endfor %}>


                </tbody>
            </table>
             <script>
        function generatePDF() {
            fetch('{{ path('generate_pdf') }}', {
                method: 'GET',
            })
            .then(response => response.blob())
            .then(blob => {
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'users.pdf';
                document.body.appendChild(a);
                a.click();
                a.remove();
            })
            .catch(error => console.error('Error generating PDF:', error));
        }
    </script>
        </div>
    </div>

<script>
        function filterTable() {
            const filter = document.getElementById('searchInput').value.toUpperCase();
            const rows = document.querySelectorAll('table tr');
            for (let i = 1; i < rows.length; i++) {
                const cols = rows[i].querySelectorAll('td');
                let visible = false;
                for (let j = 0; j < cols.length; j++) {
                    const cell = cols[j];
                    if (cell.innerText.toUpperCase().indexOf(filter) > -1) {
                        visible = true;
                        break;
                    }
                }
                rows[i].style.display = visible ? '' : 'none';
            }
        }
        document.getElementById('searchInput').addEventListener('keyup', filterTable);
	</script>
	<br>

{% endblock %}




